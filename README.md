## Ruby Basics

### Learning Objectives

* Compare/contrast Ruby and Javascript as programming languages.
* Run Ruby code by REPL (Pry/Irb) and file.
* Identify specific differences between Ruby and Javascript in the following areas...
  - Syntax
  - Variables
  - Fundamental Data Types
  - Data Collections
  - Conditionals
  - Methods (Functions)
* Examine Ruby symbols and data immutability.
* List three useful methods for arrays and hashes.
* Demonstrate how variables are stored in memory using Ruby.
* Use "!" to modify values in memory.


### Intro (1min)

HEADS UP: We are covering a lot of ground today. It's going to be a fast-paced class, so please raise your hand if I breeze over something quickly.
* For technical questions, please use Slack and one of the other instructors will help you out.

#### What is Ruby? (5min)

Server-side language
* Remember Robin's diagram from Week #1?

![Client-Server Model](http://i.imgur.com/AfiaMQP.png)

Ruby resides in and is processed by a webpage's server.
* It gathers information from the database, filters it using logic, and from that generates HTML.
* That means you **cannot** look at or mess with a site's Ruby code as you did with Javascript.
* We won't be including Ruby files in our HTML documents. You'll learn more about back-end development and how to connect everything together next week.

#### What's Ruby like? (4min)

MINASWAN
* Does anybody remember this from Allie's lunchtime presentation last Friday?
  * "Matz Is Nice And So We Are Nice"
    * Mentality not only applies to how you should treat your fellow developers, but also the philosophy behind Ruby itself
  * Yukihiro Matsumoto ("Matz") created Ruby to increase developer happiness.
  ![He really is quite nice.](matz-n-park.png)

Ruby as a "natural" language
* While it isn't exactly simple, a lot of its features are going to feel intuitive.  
* Matz: "Ruby is simple in appearance, but is very complex inside, just like our human body."

Ethos:

> "Programmers often feel joy when they can concentrate on the creative side of programming, so Ruby is designed to make programmers happy." â€” Yukihiro "Matz" Matsumoto

#### Tools We'll Be Using (5min)

We'll be running Ruby the same way we used Node to run Javascript during our first class.

Ruby
* Check to make sure you have Ruby installed: `$ ruby -v`
  * Should get back something like: `ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]`
* If you need to install: `$ rvm install 2.2`
* Run a Ruby file: `$ ruby file_name.rb`

The REPL: Pry
* Allows us to run Ruby code one line at a time.
* Install: `$ gem install pry`
* Run REPL: `$ pry`
* Quit from REPL: `exit`
* Alternative: `$ irb`

### Some Differences From Javascript (5min)

Based on your homework last night, identify a programming concept shared by Javascript and Ruby and compare/contrast its implementation in each of the languages.
- BOARD: Share and write on board.

#### Variables (5min)

No longer need to precede new variables with `var`. Just use the name of the variable!
* Variables are instantiated as they are used.
* Snakecase: all lower case, words separated by underscores.
* You should still keep names semantic!

Variables are still assigned using a single equals sign ( `=` )

```
[1] pry(main)> my_favorite_animal = "flying squirrel"
=> "flying squirrel"
```

Although we don't use `var`, there is still syntax to designate whether a variable is local or global.
* nothing implies `local` (e.g., `my_number`)
* $ makes it global (e.g., `$my_number`)
* all-caps makes it a constant (e.g., `PI = 3.14`)


#### No Semicolons!

While your code will work if you close a line with `;`, common practice is not to use them.

#### Parentheses Optional

Since I'm in a Javascript state of mind, you will notice me using them pretty often.

```
[2] pry(main)> number = 3
=> 3
[3] pry(main)> if( number == 3 ) # with parens
[3] pry(main)*   puts( "It's a 3!" )  
[3] pry(main)* end  
It's a 3!
=> nil
[4] pry(main)> if number == 3 # without parens
[4] pry(main)*   puts "It's a 3!"  
[4] pry(main)* end  
It's a 3!
=> nil
```

#### puts and gets (5min)

`puts` is the equivalent of Javascripts `console.log()`.

```
[5] pry(main)> puts "Hello, Ruby!"
Hello, Ruby!
=> nil
```

Ruby also allows us to easily accept inputs from the command line using `gets`.
```
[6] pry(main)> user_input = gets
My input  # Note that this line was typed by the user in the terminal
=> "My input\n"
[7] pry(main)> user_input
=> "My input\n"
```
* Usually `gets` is followed by `chomp`, which removes the new line generated by the user hitting return.
* If you need to convert your value to a number, add `.to_i` to the end of the method.
* To demonstrate `gets` we will write our ruby in a .rb file and run it as described above.

> In app.rb

```ruby
# Asks for and stores a command line input into the variable as a string.
puts "How old are you?: "
user_input = gets.chomp.to_i
if user_input > 10
  puts "You are older than ten"
end
```
> In the terminal from in the same directory as app.rb

```
$ ruby app.rb
How old are you?:
20
You are older than ten
$ ruby app.rb
How old are you?:
8
$
```

### Data Types

Everything in Ruby is an **object**.
* Not like a Javascript object&mdash;those are called **hashes** in Ruby.
* By "object" we mean that everything has its own set of properties and methods.
  * Not a new concept. Some data types in Javascript had their own properties and methods (e.g., `string.length`).
* Will learn more about this during your OOP class...

#### Numbers (5min)

Ruby uses same arithmetic operators as Javascript
* `+`, `-`, `*`, `/`, `%`
* Same order of operations too: P.E.M.D.A.S.  

```ruby
[8] pry(main)> 1 + 2 # Addition
=> 3
[9] pry(main)> 6 - 5 # Subtraction
=> 1
[10] pry(main)> 5 * 2 # Multiplication
=> 10
[11] pry(main)> 30 / 5 # Division
=> 6
[12] pry(main)> 31 / 5 # Note: integer division
=> 6
[13] pry(main)> 30 % 5 # Modulo (remainder)
=> 0
[14] pry(main)> 31 % 5
=> 1
[15] pry(main)> 3 ** 2 # Exponentiation
=> 9
```

#### Strings (10min)

Words, just like in Javascript.
* Surrounded by single or double-quotes
* Ruby uses similar escape characters
  - [List](http://www.java2s.com/Code/Ruby/String/EscapeCharacterslist.htm)
  - Must instantiate string with double-quotes for escape characters to work.

```
[16] pry(main)> name = "John"
=> "John"
[17] pry(main)> full_name = "John\nDoe"
=> "John\nDoe"
[18] pry(main)> puts full_name
John
Doe
=> nil
```

Not only can you concatenate strings, now you can multiply them too!

```ruby
# Concatenation
"Hello " + "there!"
# => "Hello there!"

# Multiplication
# Imagine using this for your pyramid exercise!
"Hello there! " * 3
# => "Hello there! Hello there! Hello there! "

```

##### Interpolation

Sometimes you will want to print out a string that incorporates a variable. For example...

```
[19] pry(main)> my_name = "Adrian"
=> "Adrian"
[20] pry(main)> puts "Hi my name is: " + my_name
Hi my name is: Adrian
=> nil
```

This works fine. Things aren't so simple when that variable is of a different data type. Like a number...
* Q: What's going to happen when we run this line of code?

```
[21] pry(main)> class_number = 984
=> 984
[22] pry(main)> puts "I am teaching WDI " + class_number
TypeError: no implicit conversion of Fixnum into String from (pry):26:in `+'
```

In cases like the above, you either need to convert the variable to a string using `.to_s` OR use something called "interpolation."
* Surround the non-string variable with a hashtag and curly brackets: `#{variable}`

```
[23] pry(main)> class_number = 984
=> 984
[24] pry(main)> puts "I am teaching WDI #{class_number}"
I am teaching WDI 984
=> nil
```

#### Booleans (5min)

Still `true` and `false`.
* We'll be using them in conditionals and comparisons just like in Javascript.

Comparisons in Ruby are nearly identical to Javascript
* `!=`, `&&`, `||`
* `<`, `>`, `<=`, `>=`, `==`
  - Don't worry about `===` in Ruby for now. It [does not](http://mauricio.github.io/2011/05/30/ruby-basics-equality-operators-ruby.html) have the same application as in Javascript.

Truthiness and falsiness is a lot less complicated in Ruby.
* **BOARD:** What values were "falsey" in Javascript?
  * `false`
  * `0`
  * `""`
  * `null`
  * `undefined`
  * `NaN`
* The only falsey values in Ruby are `nil` and `false`.

#### Nil (5min)

Ruby's "nothing".
* The equivalent of Javascript's `null`.
* You will usually see it when something does not have a return value (e.g., a `puts` statement).
* Also like Javascript, `nil` is falsey.

Can check if something is `nil` using `.nil?`
* **NOTE:** Any method that ends with a `?` means it will return a boolean value.

```
[25] pry(main)> something = "A thing"
=> "A thing"
[26] pry(main)> something.nil?
=> false
[27] pry(main)> something = nil
=> nil
[28] pry(main)> something.nil?
=> true
```
### Exercise: Temperature Converter (Part I) (20min)

[Temperature Converter (Ruby)](https://github.com/ga-dc/temperature_converter_ruby)

### BREAK (5min)

### Variables and Mutability (15min)

Let's talk about variables and memory allocation in Ruby.

Haha!

![XKCD pointers comic](https://camo.githubusercontent.com/e015a8e243f53ffecd9b18fc5c8d770dde1948cc/687474703a2f2f626c6f672e70726f7465637465647374617469632e636f6d2f77702d636f6e74656e742f75706c6f6164732f323030372f30352f706f696e746572732e706e67)

Why is that so funny? Because variables are pointers to values in memory.

![Variables in memory diagram](https://camo.githubusercontent.com/62b04af497f124fc9b11ec3802d73497f5c9e305/687474703a2f2f64326177357865326a6c647175652e636c6f756466726f6e742e6e65742f626f6f6b732f727562792f696d616765732f7661726961626c65735f706f696e74657273312e6a7067)

<a href="https://imgflip.com/gif/t9736"><img src="https://i.imgflip.com/t9736.gif" title="made at imgflip.com"/></a>

#### .object_id

We can use the `.object_id` method to demonstrate that two variables are pointing to the same object.
- Returns an integer identifier for the object that is automatically generated by Ruby

```
[29] pry(main)> a = 10
=> 10
[30] pry(main)> b = a
=> 10
[31] pry(main)> a.object_id
=> 21
[32] pry(main)> b.object_id
=> 21
```

#### Bang! (The `!`)

All of the Ruby data types we have discussed so far are  data types in Ruby are mutable.
* We can not only change what values in memory variables are pointing to, but we can change those values in memory as well.

Methods with an `!` attached to the end of them usually means that they will modify the object they are calling on.
* Things can get tricky when you have multiple variables pointing at the same value. For example...

```
[33] pry(main)> a = "cheeseburger"
=> "cheeseburger"
[34] pry(main)> b = a
=> "cheeseburger"
[35] pry(main)> b.upcase!
=> "CHEESEBURGER"
[36] pry(main)> a
=> "CHEESEBURGER"
```

#### Reassignment...  
<a href="https://imgflip.com/gif/t984f"><img src="https://i.imgflip.com/t984f.gif" title="made at imgflip.com"/></a>
#### ...vs Replacement
<a href="https://imgflip.com/gif/t98b3"><img src="https://i.imgflip.com/t98b3.gif" title="made at imgflip.com"/></a>

#### Exercise: Variable Assignment (15min)

[Exercise: Variable Assignment](https://gist.github.com/amaseda/35a62128d8795e045d49)
* Work in pairs and answer the questions in the link above.
* **NO CODING ALLOWED!** Stretch those brain muscles and talk these out with your partner.
* Writing these out on your table/whiteboard with markers is strongly encouraged.

### Symbols and (Im)mutability (5min)

Symbols are immutable values. That means they contain the same value through the entirety of a program and cannot be changed.
* Kind of like a string that never changes.
* Syntax: `variable_name = :symbol_name`
* No Javascript equivalent.

```
[36] pry(main)> favorite_animal = :dog
=> :dog
[37] pry(main)> puts favorite_animal
dog
=> nil
[38] pry(main)> other_favorite_animal = :killer_whale
=> :killer_whale
[39] pry(main)> another_favorite_animal = :"flying squirrel"
=> :"flying squirrel"
```

You can convert symbols to -- but not replace them with -- other data types.

```
[40] pry(main)> favorite_animal = :dog
=> :dog
[41] pry(main)> favorite_animal.to_s
=> "dog"
[42] pry(main)> favorite_animal = :dog
=> :dog
```

When/why would you use symbols?
* Make sure values that need to be constant stay constant.
* Enhance performance. Use less memory.
* Often used as keys in hashes. More on that later this class.

### BREAK (5min)

### Data Collections

#### Arrays (10min)

An ordered collection of related values. Same syntax as Javascript arrays.
* Square brackets.
* Values separated by commas.
* Zero-indexed.

```
[43] pry(main)> numbers = [ 1, 2, 3 ]
=> [1, 2, 3]
[44] pry(main)> animals = [ "dog", "cat", "horse" ]
=> ["dog", "cat", "horse"]
[45] pry(main)> animals[0]
=> "dog"
[46] pry(main)> animals[1] = "elephant"
=> "elephant"
[47] pry(main)> animals
=> ["dog", "elephant", "horse"]
```

Another super cool Ruby feature is that you can perform arithmetic operations -- addition, subtraction, multiplication -- on arrays!

```
[48] pry(main)> numbers = [ 1, 2, 3 ]
=> [1, 2, 3]
[49] pry(main)> more_numbers = [ 4, 5, 6, ]
=> [4, 5, 6]
[50] pry(main)> lots_of_numbers = numbers + more_numbers
=> [1, 2, 3, 4, 5, 6]
[51] pry(main)> lots_of_numbers - [ 4, 5, 6 ]
=> [1, 2, 3]
[52] pry(main)> numbers * 3
=> [1, 2, 3, 1, 2, 3, 1, 2, 3]
```

##### Array Methods

Ruby is very nice. It provides us with an extensive library of array methods we can use to traverse and manipulate arrays.
* [Documentation](http://ruby-doc.org/core-2.2.0/Array.html)
* Can't go over them all, but chances are if you could do it in Javascript then you can do it in Ruby.

###### Push/Pop

These Javascript methods also exist in Ruby and are used the same way.

```
[53] pry(main)> numbers = [ 1, 2, 3, 4, 5 ]
=> [1, 2, 3, 4, 5]
[54] pry(main)> numbers.push( 6 )
=> [1, 2, 3, 4, 5, 6]
[55] pry(main)> numbers.push( 7, 8, 9 )
=> [1, 2, 3, 4, 5, 6, 7, 8, 9]
[56] pry(main)> numbers.pop
=> 9
```

###### Sort
* Organizes array values from lowest to highest. Numbers and strings.

```
[57] pry(main)> numbers = [ 3, 1, 5, 2, 4 ]
=> [3, 1, 5, 2, 4]
[58] pry(main)> numbers.sort
=> [1, 2, 3, 4, 5]
```

###### Delete
* Removes an argument from an array.
* If there are multiple instances of that argument, it will delete them all.
* Look up: `.delete_at()`, `.slice()`

```
[59] pry(main)> numbers = [ 3, 1, 2, 2, 4 ]
=> [3, 1, 2, 2, 4]
[60] pry(main)> numbers.delete( 2 )
=> 2
[61] pry(main)> numbers
=> [3, 1, 4]
```

###### Shuffle

Q: Who has tried shuffling an array in this class already? What did you have to do?
* BOOM! Ruby comes with a native array shuffling method.

```
[62] pry(main)> numbers = [ 1, 2, 3, 4, 5 ]
=> [1, 2, 3, 4, 5]
[63] pry(main)> numbers.shuffle
=> [5, 1, 4, 2, 3]
```

#### Ranges (2min)

Use ranges to quickly generate arrays of data types.
* Parentheses.
* Min and max value, separated by two periods.
* Generate array using `.to_a` method.

```
[64] pry(main)> (1..5).to_a
=> [1, 2, 3, 4, 5]
[65] pry(main)> ("a".."z").to_a
=> ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"]
```


#### Hashes (3min)

A unordered, "dictionary-like" collection organized by key-value pairs. Very similar to Javascript objects...

```
[66] pry(main)> wdi_class = {
[66] pry(main)*   teacher: "John",  
[66] pry(main)*   students: [ "Yacko", "Wacko", "Dot" ],  
[66] pry(main)*   classroom: 2,  
[66] pry(main)*   in_session: true,  
[66] pry(main)*   schedule: {  
[66] pry(main)*     morning: "Ruby Basics",
[66] pry(main)*     afternoon: "Enumerables"
[66] pry(main)*   }
[66] pry(main)* }  
=> {:teacher=>"John", :students=>["Yacko", "Wacko", "Dot"], :classroom=>2, :in_session=>true, :schedule=>{:morning=>"Ruby Basics", :afternoon=>"Enumerables"}}
```
Access
```
[66] pry(main)> wdi_class[:teacher]
=> "John"
```

Modify
```ruby
[67] pry(main)> wdi_class[:teacher] = "Jack"
=> "Jack"
```

##### Hash Methods

Like arrays, Ruby also provides us with a library of hash methods.  
* [Documentation](http://ruby-doc.org/core-2.2.0/Hash.html)

##### Keys

Returns an array with all the keys in a hash.

```
[68] pry(main)> wdi_class.keys
=> [:teacher, :students, :classroom, :in_session, :schedule]
```

##### Merge

Combines two hashes.

```
[69] pry(main)> classroom = {
[69] pry(main)*   room: 1  
[69] pry(main)* }  
=> {:room=>1}
[70] pry(main)> locations = {
[70] pry(main)*   location_one: "DC",  
[70] pry(main)*   location_two: "NY",  
[70] pry(main)*   location_three: "Boston"  
[70] pry(main)* }  
=> {:location_one=>"DC", :location_two=>"NY", :location_three=>"Boston"}
[71] pry(main)> silly_hash = classroom.merge( locations )
=> {:room=>1, :location_one=>"DC", :location_two=>"NY", :location_three=>"Boston"}
[72] pry(main)> classroom
=> {:room=>1}
[73] pry(main)> locations
=> {:location_one=>"DC", :location_two=>"NY", :location_three=>"Boston"}
[74] pry(main)> silly_hash
=> {:room=>1, :location_one=>"DC", :location_two=>"NY", :location_three=>"Boston"}
```

### BREAK (5min)

### Conditionals (10min)

#### If-Else

Pretty similar to Javascript, with some differences.
* No parentheses or curly brackets required.
* Begin blocks using `if`, `elsif` **(no second "e"!)** and `else`
* We close the whole loop using `end`.
  - This will be used throughout Ruby when dealing with code blocks (e.g., method/function).

Here's an example where we check for height at a roller coaster...
> In app.rb

```ruby
puts "Welcome to the Iron Rattler! How tall are you (in feet)?"
height = gets.chomp

if height < 4
  puts "Sorry, you'll fly out of your seat if we let you on."
elsif height < 7
  puts "All aboard!"
else
  puts "If you value your head, you should not get on this ride."
end
```

#### Case

Just like Javascript's `switch` statement. Here's an example that displays a certain greeting depending on a language input.
* Note that the default case begins with `else`
> in app.rb

```ruby
puts "Hello there! Give me a language: "
language = gets.chomp.to_s

case language
when "spanish"
  puts "Hola!"
when "french"
  puts "Bonjour!"
when "wookie"
  puts "URRAAGGARHRHH"
else
  puts "I don't know #{language}!"
end
```

### Methods (10min)

The equivalent of Javascript "functions."
* Many things are referred to as "methods" in Ruby. Right now, we'll be talking about methods that are not attached to an object (e.g., array, hash).

Components
* `def` - the Ruby equivalent of `function`
* `double` - the method name in the below example
* `number` - the argument name in the below example
* `end` - closes the method

```
[75] pry(main)> def double( number )
[75] pry(main)*   doubled_number = number * 2  
[75] pry(main)*   return doubled_number  
[75] pry(main)* end  
=> :double
[76] pry(main)> double( 3 )
=> 6
[77] pry(main)> double 3
=> 6
```

You may have noticed that we use the same `return` notation as Javascript. This is called an **explicit return**, because we identify what exactly we want returned from the function.  

Ruby also lets us make **implicit returns**. This means that when we do not use the `return` keyword, Ruby will automatically return the value of the last line of code in the method.
* We encourage you to use **explicit returns** so we know exactly what your method is returning.

```
[78] pry(main)> def double( number )
[78] pry(main)*   doubled_number = number * 2  
[78] pry(main)*   doubled_number  
[78] pry(main)* end  
=> :double
[79] pry(main)> double( 3 )
=> 6
[80] pry(main)> double 3
=> 6
```

Ruby methods can also establish default argument values.
* In the below example, if we do not provide our `double` method with an argument, it will default to 5.

```
[81] pry(main)> def double( number=5 )
[81] pry(main)*   doubled_number = number * 2  
[81] pry(main)*   puts "Your doubled number is #{doubled_number}"  
[81] pry(main)*   doubled_number  
[81] pry(main)* end  
=> :double
[82] pry(main)> double
Your doubled number is 10
=> 10
```

### Exercise: Temperature Converter (Part II) (30min)

[Temperature Converter (Ruby)](https://github.com/ga-dc/temperature_converter_ruby)


## Closing

What makes Ruby so awesome, what do you like about it? How would you compare it to Javascript at this point?

Review Learning Objectives

## Resources
* [Chris Pine's Learn to Program](https://pine.fm/LearnToProgram/chap_00.html)
* [Ruby Monk](https://rubymonk.com/)
* [Why's Poignant Guide to Ruby](http://poignant.guide/book/chapter-2.html)
* [Ruby Koans](http://rubykoans.com/)
